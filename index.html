<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–ª–∏–∫–µ—Ä –ó–≤–µ–∑–¥</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom, #5bb5ff, #a1d8ff);
        }
        .balance {
            font-size: 2rem;
            margin-top: 20px;
        }
        .star {
            width: 150px;
            cursor: pointer;
        }
        .energy {
            font-size: 1rem;
            margin-top: 10px;
        }
        .save-btn {
            padding: 10px;
            background: gold;
            border: none;
            cursor: pointer;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="balance">‚≠ê <span id="stars">0</span></div>
    <img src="https://upload.wikimedia.org/wikipedia/commons/3/3f/Star_font_awesome.svg" class="star" id="star">
    <div class="energy">üîã <span id="energy">100%</span></div>
    <button class="save-btn" onclick="sendData()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>

    <script>
        let stars = 0;
        let energy = 100;
        const tg = window.Telegram.WebApp;

        function loadUserData() {
            tg.expand();
            fetch(`https://your-backend-url.com/get_user?user_id=${tg.initDataUnsafe.user.id}`)
                .then(response => response.json())
                .then(data => {
                    stars = data.stars;
                    energy = data.energy;
                    document.getElementById("stars").innerText = stars.toFixed(2);
                    document.getElementById("energy").innerText = energy + "%";
                });
        }

        document.getElementById("star").addEventListener("click", () => {
            if (energy > 0) {
                stars += 0.01;
                energy -= 1;
                document.getElementById("stars").innerText = stars.toFixed(2);
                document.getElementById("energy").innerText = energy + "%";
            }
        });

        function restoreEnergy() {
            if (energy < 100) {
                energy += 1;
                document.getElementById("energy").innerText = energy + "%";
            }
        }
        setInterval(restoreEnergy, 1000);

        function sendData() {
            const data = JSON.stringify({ stars, energy });
            tg.sendData(data);
            alert("–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!");
        }

        window.onload = loadUserData;
    </script>
</body>
</html>
